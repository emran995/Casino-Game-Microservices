2025-08-04 18:11:09,319 - INFO - Start test for user 123 with bet 10 and outcome 'WIN'
2025-08-04 18:11:09,319 - DEBUG - Mocking /payment/placeBet response
2025-08-04 18:11:09,319 - DEBUG - Mocking /slot/spin response
2025-08-04 18:11:09,319 - DEBUG - Mocking /payment/payout response (WIN)
2025-08-04 18:11:09,319 - DEBUG - Mocking /notify response
2025-08-04 18:11:09,320 - INFO - Calling GET /user/balance
2025-08-04 18:11:09,320 - INFO - Calling POST /payment/placeBet
2025-08-04 18:11:09,320 - INFO - Calling POST /slot/spin
2025-08-04 18:11:09,320 - INFO - User won! Message: Congratulations! You won $50!
2025-08-04 18:11:09,320 - INFO - Calling POST /payment/payout
2025-08-04 18:11:09,320 - INFO - Calling POST /notify
2025-08-04 18:11:09,321 - INFO - Test completed successfully for user 123
2025-08-04 18:11:09,324 - INFO - Start test for user 123 with bet 10 and outcome 'LOSE'
2025-08-04 18:11:09,325 - DEBUG - Mocking /payment/placeBet response
2025-08-04 18:11:09,325 - DEBUG - Mocking /slot/spin response
2025-08-04 18:11:09,325 - DEBUG - Mocking /notify response
2025-08-04 18:11:09,325 - INFO - Calling GET /user/balance
2025-08-04 18:11:09,326 - INFO - Calling POST /payment/placeBet
2025-08-04 18:11:09,326 - INFO - Calling POST /slot/spin
2025-08-04 18:11:09,326 - INFO - User lost. Message: Better luck next time!
2025-08-04 18:11:09,326 - INFO - Calling POST /notify
2025-08-04 18:11:09,326 - INFO - Test completed successfully for user 123
2025-08-04 18:11:23,200 - INFO - Start test for user 123 with bet 10 and outcome 'WIN'
2025-08-04 18:11:23,201 - DEBUG - Mocking /payment/placeBet response
2025-08-04 18:11:23,201 - DEBUG - Mocking /slot/spin response
2025-08-04 18:11:23,201 - DEBUG - Mocking /payment/payout response (WIN)
2025-08-04 18:11:23,201 - DEBUG - Mocking /notify response
2025-08-04 18:11:23,201 - INFO - Calling GET /user/balance
2025-08-04 18:11:23,201 - INFO - Calling POST /payment/placeBet
2025-08-04 18:11:23,202 - INFO - Calling POST /slot/spin
2025-08-04 18:11:23,202 - INFO - User won! Message: Congratulations! You won $50!
2025-08-04 18:11:23,202 - INFO - Calling POST /payment/payout
2025-08-04 18:11:23,202 - INFO - Calling POST /notify
2025-08-04 18:11:23,202 - INFO - Test completed successfully for user 123
2025-08-04 18:11:23,206 - INFO - Start test for user 123 with bet 10 and outcome 'LOSE'
2025-08-04 18:11:23,206 - DEBUG - Mocking /payment/placeBet response
2025-08-04 18:11:23,206 - DEBUG - Mocking /slot/spin response
2025-08-04 18:11:23,207 - DEBUG - Mocking /notify response
2025-08-04 18:11:23,207 - INFO - Calling GET /user/balance
2025-08-04 18:11:23,207 - INFO - Calling POST /payment/placeBet
2025-08-04 18:11:23,207 - INFO - Calling POST /slot/spin
2025-08-04 18:11:23,208 - INFO - User lost. Message: Better luck next time!
2025-08-04 18:11:23,208 - INFO - Calling POST /notify
2025-08-04 18:11:23,208 - INFO - Test completed successfully for user 123
2025-08-04 18:11:42,907 - INFO - Start test for user 123 with bet 10 and outcome 'WIN'
2025-08-04 18:11:42,907 - DEBUG - Mocking /payment/placeBet response
2025-08-04 18:11:42,907 - DEBUG - Mocking /slot/spin response
2025-08-04 18:11:42,907 - DEBUG - Mocking /payment/payout response (WIN)
2025-08-04 18:11:42,908 - DEBUG - Mocking /notify response
2025-08-04 18:11:42,908 - INFO - Calling GET /user/balance
2025-08-04 18:11:42,908 - INFO - Calling POST /payment/placeBet
2025-08-04 18:11:42,908 - INFO - Calling POST /slot/spin
2025-08-04 18:11:42,908 - INFO - User won! Message: Congratulations! You won $50!
2025-08-04 18:11:42,908 - INFO - Calling POST /payment/payout
2025-08-04 18:11:42,908 - INFO - Calling POST /notify
2025-08-04 18:11:42,909 - INFO - Test completed successfully for user 123
2025-08-04 18:11:42,911 - INFO - Start test for user 123 with bet 10 and outcome 'LOSE'
2025-08-04 18:11:42,911 - DEBUG - Mocking /payment/placeBet response
2025-08-04 18:11:42,911 - DEBUG - Mocking /slot/spin response
2025-08-04 18:11:42,911 - DEBUG - Mocking /notify response
2025-08-04 18:11:42,912 - INFO - Calling GET /user/balance
2025-08-04 18:11:42,912 - INFO - Calling POST /payment/placeBet
2025-08-04 18:11:42,912 - INFO - Calling POST /slot/spin
2025-08-04 18:11:42,912 - INFO - User lost. Message: Better luck next time!
2025-08-04 18:11:42,912 - INFO - Calling POST /notify
2025-08-04 18:11:42,912 - INFO - Test completed successfully for user 123
2025-08-04 18:11:49,837 - INFO - Start test for user 123 with bet 10 and outcome 'WIN'
2025-08-04 18:11:49,837 - DEBUG - Mocking /payment/placeBet response
2025-08-04 18:11:49,837 - DEBUG - Mocking /slot/spin response
2025-08-04 18:11:49,837 - DEBUG - Mocking /payment/payout response (WIN)
2025-08-04 18:11:49,837 - DEBUG - Mocking /notify response
2025-08-04 18:11:49,838 - INFO - Calling GET /user/balance
2025-08-04 18:11:49,838 - INFO - Calling POST /payment/placeBet
2025-08-04 18:11:49,838 - INFO - Calling POST /slot/spin
2025-08-04 18:11:49,838 - INFO - User won! Message: Congratulations! You won $50!
2025-08-04 18:11:49,839 - INFO - Calling POST /payment/payout
2025-08-04 18:11:49,839 - INFO - Calling POST /notify
2025-08-04 18:11:49,839 - INFO - Test completed successfully for user 123
2025-08-04 18:11:49,842 - INFO - Start test for user 123 with bet 10 and outcome 'LOSE'
2025-08-04 18:11:49,842 - DEBUG - Mocking /payment/placeBet response
2025-08-04 18:11:49,843 - DEBUG - Mocking /slot/spin response
2025-08-04 18:11:49,843 - DEBUG - Mocking /notify response
2025-08-04 18:11:49,843 - INFO - Calling GET /user/balance
2025-08-04 18:11:49,843 - INFO - Calling POST /payment/placeBet
2025-08-04 18:11:49,843 - INFO - Calling POST /slot/spin
2025-08-04 18:11:49,844 - INFO - User lost. Message: Better luck next time!
2025-08-04 18:11:49,844 - INFO - Calling POST /notify
2025-08-04 18:11:49,844 - INFO - Test completed successfully for user 123
2025-08-04 20:45:37,285 - DEBUG - CasinoAPI initialized with base_url=http://localhost:8000
2025-08-04 20:45:37,285 - INFO - POST http://localhost:8000/payment/placeBet
2025-08-04 20:45:37,286 - DEBUG - Response [<MagicMock name='requests.Session().request().status_code' id='1735990999616'>]: <MagicMock name='requests.Session().request().json()' id='1735996814112'>
2025-08-04 21:23:46,729 - INFO - POST http://localhost:8000/payment/placeBet
2025-08-04 21:23:46,731 - DEBUG - Response [<MagicMock name='requests.request().status_code' id='1881007753264'>]: <MagicMock name='requests.request().json()' id='1880987693040'>
2025-08-04 21:46:00,571 - INFO - Mocking balance to return 10
2025-08-04 21:46:00,572 - INFO - Setting up mocked POST responses
2025-08-04 21:46:00,572 - INFO - Placing bet of 10 for user 123
2025-08-04 21:46:00,572 - DEBUG - place_bet response: {'transactionId': 'txn_555', 'newBalance': 0}
2025-08-04 21:46:00,572 - INFO - Spinning with transaction ID 'txn_555'
2025-08-04 21:46:00,572 - DEBUG - spin response: {'Win': {'winAmount': 30, 'message': 'You won!'}}
2025-08-04 21:46:00,572 - INFO - Processing payout of 30 for transaction 'txn_555'
2025-08-04 21:46:00,573 - DEBUG - payout response: {'newBalance': 30}
2025-08-04 21:46:00,573 - INFO - Sending notification with message 'You won!'
2025-08-04 21:46:00,573 - DEBUG - notify response: {'status': 'SENT'}
2025-08-04 21:48:28,053 - INFO - Start test for user 123 with bet 10 and outcome 'WIN'
2025-08-04 21:48:28,054 - DEBUG - Mocking /payment/placeBet response
2025-08-04 21:48:28,055 - DEBUG - Mocking /slot/spin response
2025-08-04 21:48:28,055 - DEBUG - Mocking /payment/payout response (WIN)
2025-08-04 21:48:28,055 - DEBUG - Mocking /notify response
2025-08-04 21:48:28,055 - INFO - Calling GET /user/balance
2025-08-04 21:48:28,055 - INFO - Calling POST /payment/placeBet
2025-08-04 21:48:28,056 - INFO - Calling POST /slot/spin
2025-08-04 21:48:28,056 - INFO - User won! Message: Congratulations! You won $50!
2025-08-04 21:48:28,056 - INFO - Calling POST /payment/payout
2025-08-04 21:48:28,056 - INFO - Calling POST /notify
2025-08-04 21:48:28,056 - INFO - Test completed successfully for user 123
2025-08-04 21:48:28,060 - INFO - Start test for user 123 with bet 10 and outcome 'LOSE'
2025-08-04 21:48:28,060 - DEBUG - Mocking /payment/placeBet response
2025-08-04 21:48:28,060 - DEBUG - Mocking /slot/spin response
2025-08-04 21:48:28,061 - DEBUG - Mocking /notify response
2025-08-04 21:48:28,061 - INFO - Calling GET /user/balance
2025-08-04 21:48:28,061 - INFO - Calling POST /payment/placeBet
2025-08-04 21:48:28,061 - INFO - Calling POST /slot/spin
2025-08-04 21:48:28,061 - INFO - User lost. Message: Better luck next time!
2025-08-04 21:48:28,062 - INFO - Calling POST /notify
2025-08-04 21:48:28,062 - INFO - Test completed successfully for user 123
2025-08-04 21:53:04,802 - INFO - Testing insufficient balance scenario
2025-08-04 21:53:04,803 - DEBUG - Response: {'error': 'Insufficient balance'}
2025-08-04 21:53:04,806 - INFO - Testing invalid transaction ID in spin
2025-08-04 21:53:04,806 - DEBUG - Response: {'error': 'Transaction not found'}
2025-08-04 21:53:04,808 - INFO - Testing missing user_id in place_bet
2025-08-04 21:53:04,808 - DEBUG - Response: {'error': 'Missing userId'}
2025-08-04 21:53:04,810 - INFO - Testing payout without a win
2025-08-04 21:53:04,810 - DEBUG - Response: {'error': 'No win to payout'}
2025-08-04 21:53:04,819 - INFO - Testing notify with empty message
2025-08-04 21:53:04,819 - DEBUG - Response: {'error': 'Message cannot be empty'}
2025-08-04 22:05:33,572 - INFO - Running test_regular_win
2025-08-04 22:05:33,586 - INFO - Placing bet of 10
2025-08-04 22:05:33,586 - DEBUG - place_bet response: {'transactionId': 'txn_001', 'newBalance': 140}
2025-08-04 22:05:33,586 - INFO - Spinning with transaction ID txn_001
2025-08-04 22:05:33,586 - DEBUG - spin response: {'Win': {'winAmount': 50, 'message': 'Congratulations! You won $50!'}}
2025-08-04 22:05:33,586 - INFO - Processing payout of 50
2025-08-04 22:05:33,586 - DEBUG - payout response: {'newBalance': 190}
2025-08-04 22:05:33,587 - INFO - Sending win notification
2025-08-04 22:05:33,587 - DEBUG - notify response: {'status': 'SENT'}
2025-08-04 22:05:59,666 - INFO - Running test_regular_win
2025-08-04 22:05:59,680 - INFO - Placing bet of 10
2025-08-04 22:05:59,680 - DEBUG - place_bet response: {'transactionId': 'txn_001', 'newBalance': 140}
2025-08-04 22:05:59,680 - INFO - Spinning with transaction ID txn_001
2025-08-04 22:05:59,681 - DEBUG - spin response: {'Win': {'winAmount': 50, 'message': 'Congratulations! You won $50!'}}
2025-08-04 22:05:59,681 - INFO - Processing payout of 50
2025-08-04 22:05:59,681 - DEBUG - payout response: {'newBalance': 190}
2025-08-04 22:05:59,681 - INFO - Sending win notification
2025-08-04 22:05:59,681 - DEBUG - notify response: {'status': 'SENT'}
2025-08-04 22:05:59,685 - INFO - Running test_regular_loss
2025-08-04 22:05:59,685 - INFO - Placing losing bet
2025-08-04 22:05:59,685 - INFO - Spinning with losing outcome
2025-08-04 22:05:59,686 - DEBUG - spin response: {'Lose': {'message': 'Better luck next time!'}}
2025-08-04 22:05:59,686 - INFO - Sending lose notification
2025-08-04 22:05:59,686 - DEBUG - notify response: {'status': 'SENT'}
2025-08-04 22:05:59,689 - INFO - Running test_multiple_rounds
2025-08-04 22:05:59,689 - INFO - Round 1: Placing bet of 5
2025-08-04 22:05:59,690 - INFO - Round 1: Spinning with transaction ID txn_1
2025-08-04 22:05:59,690 - INFO - Round 2: Placing bet of 10
2025-08-04 22:05:59,690 - INFO - Round 2: Spinning with transaction ID txn_2
2025-08-04 22:05:59,690 - INFO - Round 3: Placing bet of 15
2025-08-04 22:05:59,690 - INFO - Round 3: Spinning with transaction ID txn_3
2025-08-04 22:05:59,693 - INFO - Running test_notify_format
2025-08-04 22:05:59,694 - DEBUG - notify response: {'status': 'SENT'}
2025-08-04 22:05:59,697 - INFO - Running test_balance_after_win
2025-08-04 22:05:59,698 - INFO - Placing bet of 10
2025-08-04 22:05:59,698 - INFO - Spinning and receiving WIN
2025-08-04 22:05:59,698 - DEBUG - spin response: {'Win': {'winAmount': 50, 'message': 'You won!'}}
2025-08-04 22:05:59,699 - INFO - Processing payout of 50
2025-08-04 22:05:59,699 - DEBUG - payout response: {'newBalance': 140}
2025-08-04 22:12:09,472 - WARNING - Server is not running at http://localhost:8000 — skipping security tests.
2025-08-04 22:12:25,961 - INFO - Running test_regular_win
2025-08-04 22:12:25,975 - INFO - Placing bet of 10
2025-08-04 22:12:25,975 - DEBUG - place_bet response: {'transactionId': 'txn_001', 'newBalance': 140}
2025-08-04 22:12:25,976 - INFO - Spinning with transaction ID txn_001
2025-08-04 22:12:25,976 - DEBUG - spin response: {'Win': {'winAmount': 50, 'message': 'Congratulations! You won $50!'}}
2025-08-04 22:12:25,976 - INFO - Processing payout of 50
2025-08-04 22:12:25,976 - DEBUG - payout response: {'newBalance': 190}
2025-08-04 22:12:25,976 - INFO - Sending win notification
2025-08-04 22:12:25,976 - DEBUG - notify response: {'status': 'SENT'}
2025-08-04 22:12:25,979 - INFO - Running test_regular_loss
2025-08-04 22:12:25,979 - INFO - Placing losing bet
2025-08-04 22:12:25,979 - INFO - Spinning with losing outcome
2025-08-04 22:12:25,980 - DEBUG - spin response: {'Lose': {'message': 'Better luck next time!'}}
2025-08-04 22:12:25,980 - INFO - Sending lose notification
2025-08-04 22:12:25,980 - DEBUG - notify response: {'status': 'SENT'}
2025-08-04 22:12:25,983 - INFO - Running test_multiple_rounds
2025-08-04 22:12:25,983 - INFO - Round 1: Placing bet of 5
2025-08-04 22:12:25,984 - INFO - Round 1: Spinning with transaction ID txn_1
2025-08-04 22:12:25,984 - INFO - Round 2: Placing bet of 10
2025-08-04 22:12:25,984 - INFO - Round 2: Spinning with transaction ID txn_2
2025-08-04 22:12:25,984 - INFO - Round 3: Placing bet of 15
2025-08-04 22:12:25,984 - INFO - Round 3: Spinning with transaction ID txn_3
2025-08-04 22:12:25,987 - INFO - Running test_notify_format
2025-08-04 22:12:25,987 - DEBUG - notify response: {'status': 'SENT'}
2025-08-04 22:12:25,989 - INFO - Running test_balance_after_win
2025-08-04 22:12:25,989 - INFO - Placing bet of 10
2025-08-04 22:12:25,990 - INFO - Spinning and receiving WIN
2025-08-04 22:12:25,990 - DEBUG - spin response: {'Win': {'winAmount': 50, 'message': 'You won!'}}
2025-08-04 22:12:25,990 - INFO - Processing payout of 50
2025-08-04 22:12:25,990 - DEBUG - payout response: {'newBalance': 140}
